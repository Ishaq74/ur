---
import MainLayout from '../../layouts/MainLayout.astro';
import Button from '../../components/atoms/Button.astro';
import { useTranslations, getLangFromUrl, getLocalizedPath } from '../../i18n';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<MainLayout 
  title={`${t('footer.report')} - Salut Annecy`} 
  description="Signaler un probl√®me ou une erreur sur Salut Annecy"
  lang={lang}
>
  <section class="page-section">
    <div class="container">
      <div class="content-wrapper">
        <h1>{t('footer.report')}</h1>
        <p class="intro">
          Vous avez remarqu√© une erreur, un contenu inappropri√© ou un probl√®me technique ? 
          Aidez-nous √† am√©liorer Salut Annecy en nous le signalant.
        </p>
        
        <div class="content">
          <div class="report-types">
            <div class="report-type-card">
              <h2>üîç Erreur d'Information</h2>
              <p>
                Horaires incorrects, coordonn√©es erron√©es, description inexacte, 
                √©tablissement ferm√© d√©finitivement...
              </p>
            </div>

            <div class="report-type-card">
              <h2>‚ö†Ô∏è Contenu Inappropri√©</h2>
              <p>
                Contenu offensant, spam, fausses informations, violation des droits 
                d'auteur...
              </p>
            </div>

            <div class="report-type-card">
              <h2>üêõ Probl√®me Technique</h2>
              <p>
                Page qui ne s'affiche pas correctement, lien cass√©, erreur de 
                chargement, bug...
              </p>
            </div>

            <div class="report-type-card">
              <h2>üí° Suggestion</h2>
              <p>
                Id√©e d'am√©lioration, nouvelle fonctionnalit√© souhait√©e, √©tablissement 
                √† ajouter...
              </p>
            </div>
          </div>

          <div class="report-form-section">
            <h2>Formulaire de Signalement</h2>
            <p>
              Remplissez ce formulaire en d√©taillant le probl√®me rencontr√©. 
              Notre √©quipe traitera votre signalement dans les plus brefs d√©lais.
            </p>
            
            <form class="report-form">
              <div class="form-group">
                <label for="type">Type de signalement *</label>
                <select id="type" name="type" required>
                  <option value="">S√©lectionnez un type</option>
                  <option value="error">Erreur d'information</option>
                  <option value="inappropriate">Contenu inappropri√©</option>
                  <option value="technical">Probl√®me technique</option>
                  <option value="suggestion">Suggestion</option>
                  <option value="other">Autre</option>
                </select>
              </div>

              <div class="form-group">
                <label for="url">URL de la page concern√©e</label>
                <input type="url" id="url" name="url" placeholder="https://..." />
              </div>

              <div class="form-group">
                <label for="subject">Sujet *</label>
                <input type="text" id="subject" name="subject" required placeholder="D√©crivez bri√®vement le probl√®me" />
              </div>

              <div class="form-group">
                <label for="description">Description d√©taill√©e *</label>
                <textarea id="description" name="description" rows="6" required 
                  placeholder="D√©crivez le probl√®me en d√©tail. Plus vous serez pr√©cis, plus nous pourrons vous aider rapidement."></textarea>
              </div>

              <div class="form-group">
                <label for="email">Votre email (optionnel)</label>
                <input type="email" id="email" name="email" 
                  placeholder="Si vous souhaitez √™tre tenu inform√© du traitement" />
                <small>Votre email ne sera utilis√© que pour vous tenir inform√© du traitement de votre signalement.</small>
              </div>

              <div class="form-actions">
                <Button type="submit" variant="primary" size="lg">
                  Envoyer le signalement
                </Button>
                <Button href={getLocalizedPath('/', lang)} variant="secondary" size="lg">
                  Annuler
                </Button>
              </div>
            </form>
          </div>

          <div class="info-section">
            <h2>D√©lai de Traitement</h2>
            <p>
              Nous nous engageons √† examiner tous les signalements dans un d√©lai de 48 heures 
              ouvr√©es. Les probl√®mes urgents (contenu inappropri√©, erreurs critiques) sont 
              trait√©s en priorit√©.
            </p>

            <h2>Contact Direct</h2>
            <p>
              Pour les probl√®mes urgents, vous pouvez √©galement nous contacter directement :
            </p>
            <p>
              Email : <a href="mailto:report@salutannecy.fr">report@salutannecy.fr</a><br>
              T√©l√©phone : +33 (0)4 XX XX XX XX
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>
</MainLayout>

<style>
  .page-section {
    padding: var(--spacing-12) 0;
    min-height: 60vh;
  }

  .content-wrapper {
    max-width: 900px;
    margin: 0 auto;
  }

  h1 {
    font-size: var(--font-size-4xl);
    font-weight: var(--font-weight-bold);
    margin-bottom: var(--spacing-4);
    color: var(--color-text-primary);
    text-align: center;
  }

  .intro {
    font-size: var(--font-size-lg);
    text-align: center;
    color: var(--color-text-secondary);
    margin-bottom: var(--spacing-10);
  }

  .report-types {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--spacing-5);
    margin-bottom: var(--spacing-12);
  }

  .report-type-card {
    padding: var(--spacing-5);
    background-color: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    transition: transform var(--transition-fast), box-shadow var(--transition-fast);
  }

  .report-type-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .report-type-card h2 {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    margin-bottom: var(--spacing-3);
    color: var(--color-text-primary);
  }

  .report-type-card p {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    line-height: 1.6;
    margin-bottom: 0;
  }

  .report-form-section {
    margin-bottom: var(--spacing-12);
  }

  .report-form-section h2 {
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-semibold);
    margin-bottom: var(--spacing-4);
    color: var(--color-text-primary);
  }

  .report-form-section > p {
    font-size: var(--font-size-base);
    color: var(--color-text-secondary);
    margin-bottom: var(--spacing-6);
  }

  .report-form {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-5);
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-2);
  }

  .form-group label {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-primary);
  }

  .form-group input,
  .form-group textarea,
  .form-group select {
    padding: var(--spacing-3);
    font-size: var(--font-size-base);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    background-color: var(--color-background);
    color: var(--color-text-primary);
  }

  .form-group input:focus,
  .form-group textarea:focus,
  .form-group select:focus {
    outline: none;
    border-color: var(--color-primary-500);
  }

  .form-group small {
    font-size: var(--font-size-xs);
    color: var(--color-text-tertiary);
  }

  .form-actions {
    display: flex;
    gap: var(--spacing-4);
    margin-top: var(--spacing-4);
  }

  .info-section {
    padding: var(--spacing-6);
    background-color: var(--color-surface);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-border);
  }

  .info-section h2 {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
    margin-bottom: var(--spacing-3);
    color: var(--color-text-primary);
  }

  .info-section p {
    font-size: var(--font-size-base);
    color: var(--color-text-secondary);
    line-height: 1.6;
    margin-bottom: var(--spacing-4);
  }

  .info-section p:last-child {
    margin-bottom: 0;
  }

  .info-section a {
    color: var(--color-primary-600);
    text-decoration: none;
  }

  .info-section a:hover {
    text-decoration: underline;
  }

  @media (max-width: 768px) {
    h1 {
      font-size: var(--font-size-3xl);
    }

    .intro {
      font-size: var(--font-size-base);
    }

    .report-types {
      grid-template-columns: 1fr;
    }

    .form-actions {
      flex-direction: column;
      align-items: stretch;
    }
  }
</style>
